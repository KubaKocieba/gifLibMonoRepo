{"ast":null,"code":"import { Subject, Subscription } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged, filter, map } from \"rxjs/operators\";\nimport { UntypedFormControl, Validators } from \"@angular/forms\";\nimport { MainService } from \"../../shared/services/main.service\";\nimport { SearchGiphyService } from \"./service/search-giphy.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./service/search-giphy.service\";\nimport * as i2 from \"../../shared/services/main.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/expansion\";\nimport * as i10 from \"@angular/material/icon\";\nfunction SearchGiphyComponent_mat_error_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"You must enter a value\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SearchGiphyComponent_mat_expansion_panel_21_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\")(2, \"img\", 11);\n    i0.ɵɵlistener(\"click\", function SearchGiphyComponent_mat_expansion_panel_21_div_5_Template_img_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const result_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.sendToLibrary(ctx_r5.actualTerm, result_r4));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const result_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", result_r4.images.preview_gif.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SearchGiphyComponent_mat_expansion_panel_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\", 8)(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\")(3, \"span\");\n    i0.ɵɵtext(4, \" What giphy gives... \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(5, SearchGiphyComponent_mat_expansion_panel_21_div_5_Template, 3, 1, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"expanded\", true);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.searchResults);\n  }\n}\nexport class SearchGiphyComponent {\n  constructor(searchGiphyService, mainService) {\n    this.searchGiphyService = searchGiphyService;\n    this.mainService = mainService;\n    this.searchControl = new UntypedFormControl(\"\", Validators.required);\n    this.actualTerm = null;\n    this.searchInput = new Subject();\n    this.subscriptions = new Subscription();\n  }\n  ngOnInit() {\n    this.inputSubscribe();\n  }\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n  searchNext(searchTerm) {\n    this.searchInput.next(searchTerm);\n  }\n  sendToLibrary(category, item) {\n    this.mainService.transferToLibrary(category.trim(), item);\n    this.searchResults.splice(this.searchResults.indexOf(item), 1);\n  }\n  clearTerms() {\n    this.searchResults = null;\n    this.searchControl.reset();\n  }\n  search(term) {\n    this.subscriptions.add(this.searchGiphyService.search(term).subscribe(res => {\n      this.actualTerm = term;\n      this.searchResults = res;\n    }));\n  }\n  inputSubscribe() {\n    this.subscriptions.add(this.searchInput.pipe(debounceTime(400), distinctUntilChanged(), filter(searchTerm => !!searchTerm), map(searchTerm => {\n      this.search(searchTerm);\n    })).subscribe());\n  }\n}\nSearchGiphyComponent.ɵfac = function SearchGiphyComponent_Factory(t) {\n  return new (t || SearchGiphyComponent)(i0.ɵɵdirectiveInject(i1.SearchGiphyService), i0.ɵɵdirectiveInject(i2.MainService));\n};\nSearchGiphyComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SearchGiphyComponent,\n  selectors: [[\"app-search-giphy\"]],\n  decls: 22,\n  vars: 3,\n  consts: [[\"appearance\", \"outlined\", 1, \"Search\"], [1, \"SearchField\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Type to begin the gif search\", 3, \"formControl\", \"keyup\"], [\"searchInput\", \"\"], [4, \"ngIf\"], [\"mat-stroked-button\", \"\", 3, \"click\"], [\"id\", \"search\"], [3, \"expanded\", 4, \"ngIf\"], [3, \"expanded\"], [\"class\", \" SearchResults\", 4, \"ngFor\", \"ngForOf\"], [1, \"SearchResults\"], [3, \"src\", \"click\"]],\n  template: function SearchGiphyComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r7 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"mat-card-header\")(2, \"mat-card-title\");\n      i0.ɵɵtext(3, \"Search and put in library\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"mat-card-content\")(5, \"ol\")(6, \"li\");\n      i0.ɵɵtext(7, \"Think a word that you search gif for\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"li\");\n      i0.ɵɵtext(9, \"Put it into search field below\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"li\");\n      i0.ɵɵtext(11, \"Click the image - it gets to library's category of the search word\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 1)(13, \"mat-form-field\")(14, \"input\", 2, 3);\n      i0.ɵɵlistener(\"keyup\", function SearchGiphyComponent_Template_input_keyup_14_listener() {\n        i0.ɵɵrestoreView(_r7);\n        const _r0 = i0.ɵɵreference(15);\n        return i0.ɵɵresetView(ctx.searchNext(_r0.value));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, SearchGiphyComponent_mat_error_16_Template, 2, 0, \"mat-error\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function SearchGiphyComponent_Template_button_click_17_listener() {\n        return ctx.clearTerms();\n      });\n      i0.ɵɵelementStart(18, \"mat-icon\");\n      i0.ɵɵtext(19, \"clear\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"div\", 6);\n      i0.ɵɵtemplate(21, SearchGiphyComponent_mat_expansion_panel_21_Template, 6, 2, \"mat-expansion-panel\", 7);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"formControl\", ctx.searchControl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchControl.invalid);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchResults);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlDirective, i5.MatButton, i6.MatCard, i6.MatCardContent, i6.MatCardHeader, i6.MatCardTitle, i7.MatInput, i8.MatFormField, i8.MatError, i9.MatExpansionPanel, i9.MatExpansionPanelHeader, i9.MatExpansionPanelTitle, i10.MatIcon],\n  styles: [\"[_nghost-%COMP%]   .mat-expansion-panel-body[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;gap:20px;justify-content:center;align-content:center;align-items:center}[_nghost-%COMP%]   .mat-expansion-panel-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.SearchField[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;margin:0 30px}.SearchField[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;margin-left:20px}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}