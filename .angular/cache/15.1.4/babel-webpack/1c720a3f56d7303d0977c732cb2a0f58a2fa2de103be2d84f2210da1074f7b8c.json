{"ast":null,"code":"import { Subscription } from \"rxjs\";\nimport { MatAccordion } from \"@angular/material/expansion\";\nimport { MainService } from \"../../shared/services/main.service\";\nimport { Router } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/main.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/expansion\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/progress-bar\";\nimport * as i10 from \"./library-image/library-image.component\";\nimport * as i11 from \"./library-sort.pipe\";\nfunction GifLibraryComponent_mat_progress_bar_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 7);\n  }\n}\nfunction GifLibraryComponent_ng_template_26_mat_expansion_panel_1_mat_panel_description_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-panel-description\");\n    i0.ɵɵtext(1, \" Click to show GIFS \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    category: a0,\n    el: a1\n  };\n};\nfunction GifLibraryComponent_ng_template_26_mat_expansion_panel_1_app_library_image_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-library-image\", 15);\n  }\n  if (rf & 2) {\n    const el_r8 = ctx.$implicit;\n    const i_r9 = ctx.index;\n    const category_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"img\", el_r8)(\"detailsClues\", i0.ɵɵpureFunction2(2, _c0, category_r4, i_r9));\n  }\n}\nfunction GifLibraryComponent_ng_template_26_mat_expansion_panel_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\", 10)(1, \"mat-expansion-panel-header\", 11)(2, \"mat-icon\", 12);\n    i0.ɵɵlistener(\"click\", function GifLibraryComponent_ng_template_26_mat_expansion_panel_1_Template_mat_icon_click_2_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const category_r4 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.removeCategory($event, category_r4));\n    });\n    i0.ɵɵtext(3, \" delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-title\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, GifLibraryComponent_ng_template_26_mat_expansion_panel_1_mat_panel_description_6_Template, 2, 0, \"mat-panel-description\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, GifLibraryComponent_ng_template_26_mat_expansion_panel_1_app_library_image_7_Template, 1, 5, \"app-library-image\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"expanded\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"title\", \"Remove category \" + category_r4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", category_r4, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r5 === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.library[category_r4][\"allImages\"]);\n  }\n}\nfunction GifLibraryComponent_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-accordion\", 8);\n    i0.ɵɵtemplate(1, GifLibraryComponent_ng_template_26_mat_expansion_panel_1_Template, 8, 5, \"mat-expansion-panel\", 9);\n    i0.ɵɵpipe(2, \"librarySort\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"multi\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(2, 2, ctx_r2.library, ctx_r2.sortOptions));\n  }\n}\nexport class GifLibraryComponent {\n  constructor(mainService, router) {\n    this.mainService = mainService;\n    this.router = router;\n    this.library = {};\n    this.sortOptions = \"date\";\n    this.progress = 0;\n    this.subscriptions = new Subscription();\n  }\n  ngOnInit() {\n    this.observeUpdates();\n    this.spinnerInit();\n    this.loadFirebaseData();\n    this.saveDisabledSet();\n  }\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n  spinnerInit() {\n    const spinnerSub = this.mainService.spinner.subscribe(visibility => {\n      this.spinnerVisible = visibility;\n    });\n    this.subscriptions.add(this.mainService.progress.subscribe(value => {\n      this.progress = value;\n    }));\n    this.subscriptions.add(spinnerSub);\n  }\n  loadFirebaseData() {\n    this.mainService.loadFirebaseData();\n  }\n  observeUpdates() {\n    const updateSub = this.mainService.libraryUpdate.subscribe(() => {\n      this.library = this.mainService.getLibrary();\n      this.saveDisabled = false;\n    });\n    this.subscriptions.add(updateSub);\n  }\n  saveDisabledSet() {\n    const saveStateSub = this.mainService.saveState.subscribe(state => {\n      this.saveDisabled = !state;\n    });\n    this.subscriptions.add(saveStateSub);\n  }\n  saveToFirebase() {\n    this.mainService.saveLibraryToFirebase();\n  }\n  removeCategory(event, category) {\n    event.stopPropagation();\n    this.mainService.deleteCategory(category);\n  }\n}\nGifLibraryComponent.ɵfac = function GifLibraryComponent_Factory(t) {\n  return new (t || GifLibraryComponent)(i0.ɵɵdirectiveInject(i1.MainService), i0.ɵɵdirectiveInject(i2.Router));\n};\nGifLibraryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GifLibraryComponent,\n  selectors: [[\"app-gif-library\"]],\n  viewQuery: function GifLibraryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatAccordion, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.allTabs = _t.first);\n    }\n  },\n  decls: 28,\n  vars: 6,\n  consts: [[\"appearance\", \"outlined\"], [1, \"LibraryNavi\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", 3, \"color\", \"click\"], [\"mode\", \"indeterminate\", 4, \"ngIf\", \"ngIfElse\"], [\"libraryDiv\", \"\"], [\"mode\", \"indeterminate\"], [3, \"multi\"], [\"class\", \"CategoryPanel\", 3, \"expanded\", 4, \"ngFor\", \"ngForOf\"], [1, \"CategoryPanel\", 3, \"expanded\"], [1, \"PanelHeader\"], [3, \"title\", \"click\"], [4, \"ngIf\"], [3, \"img\", \"detailsClues\", 4, \"ngFor\", \"ngForOf\"], [3, \"img\", \"detailsClues\"]],\n  template: function GifLibraryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"mat-card-header\")(2, \"mat-card-title\");\n      i0.ɵɵtext(3, \"Your Library\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1)(5, \"span\")(6, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_6_listener() {\n        return ctx.saveToFirebase();\n      });\n      i0.ɵɵtext(7, \" Save \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_8_listener() {\n        return ctx.allTabs.openAll();\n      });\n      i0.ɵɵtext(9, \" Open All \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_10_listener() {\n        return ctx.allTabs.closeAll();\n      });\n      i0.ɵɵtext(11, \" Close All \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"span\")(13, \"label\");\n      i0.ɵɵtext(14, \"Sort by:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_15_listener() {\n        return ctx.sortOptions = null;\n      });\n      i0.ɵɵtext(16, \" A-z \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_17_listener() {\n        return ctx.sortOptions = \"reverse\";\n      });\n      i0.ɵɵtext(18, \" z-A \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function GifLibraryComponent_Template_button_click_19_listener() {\n        return ctx.sortOptions = \"date\";\n      });\n      i0.ɵɵelementStart(20, \"mat-icon\");\n      i0.ɵɵtext(21, \"date_range\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"mat-label\");\n      i0.ɵɵtext(23, \"Latest\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(24, \"mat-card-content\");\n      i0.ɵɵtemplate(25, GifLibraryComponent_mat_progress_bar_25_Template, 1, 0, \"mat-progress-bar\", 5);\n      i0.ɵɵtemplate(26, GifLibraryComponent_ng_template_26_Template, 3, 5, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(27);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"disabled\", ctx.saveDisabled);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"color\", !ctx.sortOptions ? \"warn\" : \"primary\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"color\", ctx.sortOptions === \"reverse\" ? \"warn\" : \"primary\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"color\", ctx.sortOptions === \"date\" ? \"warn\" : \"primary\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.spinnerVisible)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.MatButton, i5.MatCard, i5.MatCardContent, i5.MatCardHeader, i5.MatCardTitle, i6.MatLabel, i7.MatAccordion, i7.MatExpansionPanel, i7.MatExpansionPanelHeader, i7.MatExpansionPanelTitle, i7.MatExpansionPanelDescription, i8.MatIcon, i9.MatProgressBar, i10.LibraryImageComponent, i11.LibrarySortPipe],\n  styles: [\".LibraryNavi[_ngcontent-%COMP%]{display:grid;justify-content:stretch}.LibraryNavi[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 5px}.LibraryNavi[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 15px}.PanelHeader[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 20px}.PanelHeader[_ngcontent-%COMP%]   .mat-content[_ngcontent-%COMP%]{align-items:center}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}